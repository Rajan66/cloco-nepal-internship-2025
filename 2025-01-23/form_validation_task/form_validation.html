<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Can i date your daughter?</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <main id="container">
        <form id="survey-form">
            <h1 id="title">Application for permission to date my daughter</h1>
            <p id="note"><b>Note:</b> Form is to be completed at least 21 days prior to date</p>

            <fieldset>
                <legend>Personal Details</legend>

                <div>
                    <label id="name-label" for="name">Name:</label>
                    <input type="text" required id="name" name="user_name" placeholder="Enter name here" />
                    <span id="nameError" class="error"></span><br>
                </div>
                <div>
                    <label for="address-label">Address:</label>
                    <input type="Address" id="address" name="Address" placeholder="Enter address here" />
                    <span id="addressError" class="error"></span><br>
                </div>
                <div>
                    <label id="email-label" for="Email">Email:</label>
                    <input type="email" required id="email" name="user_email" placeholder="Enter email here">
                    <span id="emailError" class="error"></span><br>
                </div>
                <div>
                    <label id="number-label" for="phone">Phone Number:</label>
                    <input type="text" id="phone" name="phone" placeholder="Enter 10 digit number" min="1" />
                    <span id="phoneError" class="error"></span><br>
                </div>
                <div>
                    <label id="iq-label" for="iq">IQ:</label>
                    <input type="number" id="iq" name="iq" placeholder="Enter IQ here" />
                    <span id="iqError" class="error"></span><br>
                </div>

            </fieldset>
            <fieldset>
                <label for="Gender">Check All That Apply</label>
                <p>
                    <input type="checkbox" name="tattoo" value="tattoo" class="checkbox"> I have tattoos and/or
                    piercings<br>
                    <input type="checkbox" name="age" value="Car" class="checkbox"> I am more than 2 years older than my
                    daughter<br>
                    <input type="checkbox" name="car" value="car" class="checkbox"> I own a panel van or V8 ute<br>
                    <input type="checkbox" name="work" value="work" class="checkbox" checked> I work full-time<br>
                    <input type="checkbox" name="rich" value="rich" class="checkbox" checked> My parents are rich<br>
                    <input type="checkbox" name="loc" value="loc" class="checkbox" checked> Is the date at a well lit
                    public location<br>
                </p>
            </fieldset>

            <fieldset>
                <div>
                    <label for="politics">Education Level Completed:</label>
                    <select id="dropdown2">
                        <option value="University">University</option>
                        <option value="College">College</option>
                        <option value="Secondary">High School</option>
                        <option value="None">None</option>
                    </select>
                </div>
            </fieldset>

            <fieldset>
                <legend>Essay Section</legend>
                <div>
                    <label for="essay"></label>
                    <p> In 50 words or more explain why you want to date my daughter</p>
                    <textarea id="essay" name="user_message" rows="4" cols="50"
                        placeholder="Enter Text Here"></textarea>
                    <span id="essayError" class="error"></span>
                </div>
            </fieldset>
            <div id="submit-button">
                <button type="submit" id="submitButton">Send your application</button>
            </div>

        </form>
        <script>
            let error = false;

            const form = document.getElementById("survey-form");
            form.addEventListener('submit', function (e) {
                // prevents the form from submitting
                e.preventDefault();

                const nameField = document.getElementById("name");
                const addressField = document.getElementById("address");
                const emailField = document.getElementById("email");
                const phoneField = document.getElementById("phone");
                const iqField = document.getElementById("iq");
                const essayField = document.getElementById("essay");

                validateName(nameField, nameField.value.trim());
                validateAddress(addressField, addressField.value.trim());
                validateEmail(emailField, emailField.value.trim());
                validateIQ(iqField, iqField.value.trim());
                validatePhone(phoneField, phoneField.value.trim());
                validateEssay(essayField, essayField.value.trim());

                if (!error) {
                    alert('Form submitted successfully!');
                    form.submit();
                }
            })

            const validateName = (nameField, name) => {
                if (name === "") {
                    document.getElementById("nameError").innerHTML = "**Name field cannot be empty**"
                    nameField.focus();
                    nameField.scrollIntoView({
                        behavior: "smooth",
                    })
                    error = true;
                } else {
                    document.getElementById("nameError").innerHTML = ""
                    //error = false;
                }
            }

            const validateAddress = (addressField, address) => {
                if (address === "") {
                    document.getElementById("addressError").innerHTML = "**Address field cannot be empty**"
                    error = true;
                    addressField.focus();
                    addressField.scrollIntoView({
                        behavior: "smooth",
                    })
                } else {
                    document.getElementById("addressError").innerHTML = ""
                    //error = false;
                }
            }

            const validateEmail = (emailField, email) => {
                const emailRegex =
                    /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;

                if (email === "") {
                    document.getElementById("addressError").innerHTML = "**Address field cannot be empty**"
                    error = true;
                    emailField.focus();
                    emailField.scrollIntoView({
                        behavior: "smooth",
                    })
                } else if (!emailRegex.test(email)) {
                    // regex.test() is a built in function to validate things with the regex
                    document.getElementById("emailError").innerHTML = "**Invalid email**"
                    error = false;
                }
            }

            const validatePhone = (phoneField, phone) => {
                if (phone === null || phone.length > 10 || phone.length < 10) {
                    document.getElementById("phoneError").innerHTML = "**Invalid phone number**"
                    error = true;
                    phoneField.focus();
                    phoneField.scrollIntoView({
                        behavior: "smooth",
                    })
                } else {
                    document.getElementById("phoneError").innerHTML = ""
                    error = false;
                }
            }

            const validateIQ = (iqField, iq) => {
                if (iq == "" || iq < 0 || iq > 200) {
                    document.getElementById("iqError").innerHTML = "**Be real xd**"
                    error = true;
                    iqField.focus();
                    iqField.scrollIntoView({
                        behavior: "smooth",

                    })
                } else {
                    document.getElementById("iqError").innerHTML = ""
                    error = false;
                }
            }

            const validateEssay = (essayField, essay) => {
                if (essay.length < 50) {
                    document.getElementById("essayError").innerHTML = "**So you don't love her?**"
                    error = true;
                    essayField.focus();
                    essayField.scrollIntoView({
                        behavior: "smooth",
                    })
                } else {
                    document.getElementById("essayError").innerHTML = ""
                    error = false;
                }
            }
        </script>
</body>

</html>